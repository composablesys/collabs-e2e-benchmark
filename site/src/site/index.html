<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>eDesigners</title>
    <style>
      :root {
        --mdc-theme-primary: #fff;
        --mdc-theme-on-primary: #000;
      }

      body {
        background: #fafafa;
        margin: 0;
      }

      #menu {
        background: darkslategrey;
        height: 64px;
        width: 100%;
      }

      mwc-button {
        margin-top: 12px;
        margin-left: 8px;
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:500"
      rel="stylesheet"
    />
    <script>
      window.wsTimeout = 10 * 1000;
      const realWebSocket = window.WebSocket;
      window.WebSocket = function (...args) {
        let timeout = 0;
        const socket = new realWebSocket(...args);
        socket.addEventListener("message", () => {
          console.log("SOCKET_RECV");
          if (timeout !== 0) {
            clearTimeout(timeout);
          }
          timeout = setTimeout(() => {
            if ("reconnect" in socket) {
              socket.reconnect();
            } else {
              socket.close();
            }
          }, window.wsTimeout);
        });
        return socket;
      };
      window.WebSocket.OPEN = 1;
      window.WebSocket.CLOSING = 2;
    </script>
  </head>
  <body>
    <div id="menu">
      <div>
        <mwc-button id="btnAddRect" raised> Add rectangle </mwc-button>
        <mwc-button id="btnAddCircle" raised> Add circle </mwc-button>
        <mwc-button id="btnRemove" raised disabled> Remove </mwc-button>
        <mwc-button id="btnRobot" raised> Start robot </mwc-button>
      </div>
    </div>
    <canvas id="c"></canvas>
  </body>
</html>
